# Sitar Web Engine

## Введение

Sitar [sɪˈtɑːr] — это многофункциональный веб-фреймворк, предназначенный для разделения данных (контента) от их представления (шаблонов) и редактирования данного контента непосредственно в веб-браузере.

## Принцип работы

Построение веб-страницы происходит на веб-сервере в одном из двух режимов:

- нормальный режим
- режим редактирования

### Нормальный режим

В нормальном режиме любой вызов метода `show` объекта `$data` с параметром `key` в файле шаблона `template.html`

```php
<?=$data->show("key")?>
```

будет заменен на значение `data` параметра `key` из файла `storage/editable.$lang.json`

```json
{
	"key": "data"
}
```

Кроме того, класс объекта `$data` поддерживает многоязычность, реализованную через обращение к разным независимым файлам `editable.$lang.json` в директории `storage`.

Если код языка не установлен до вызова `<?=$data->show("key")?>`, то будет использован файл по умолчанию: `editable.ru.json`.

Чтобы использовать файл контента с другой локализацией, необходимо до вызова метода `show` объекта `$data` один раз установить переменную PHP-сессии `lang` через встроенную в Sitar функцию

```php
<?php session("lang", "ua")?>
```

Таким образом, метод `show` объекта `$data` будет использовать файл с именем `storage/editable.$lang.json`, где `$lang` — это значение ключа PHP-сессии `lang`.

Кроме обычных данных (текст, html), Sitar поддерживает хранение в файле данных кода PHP и выполнение его при вызове метода `show` объекта `$data`.

```json
{
	"key": "<?='hello'?>"
}
```

Выполнение кода PHP происходит только в нормальном режиме, в режиме редактирования код не выполняется. Данная функциональность является опасной и ее следует использовать с осторожностью.

### Режим редактирования

В режиме редактирования любой вызов метода `show` объекта `$data` с параметром `key` в файле шаблона `template.html`

```php
<?=$data->show("key")?>
```

будет заменен на значение `data` параметра `key` из файла `storage/editable.$lang.json`

```json
{
	"key": "data"
}
```

Отличие режима редактирования от нормального режима заключается в том, что значение параметра `key` из файла `storage/editable.$lang.json` заключается в html элемент `<data>` со свойством `contenteditable = false`, для того, чтобы включить нативный способ редактирования содержимого в веб-браузере. Таким образом, Sitar выдает веб-браузеру следующий html-код:

```html
<data id="key" contenteditable="false" title="key">data</data>
```

## Возможности